<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista de Compras</title>
    <style>
        body {
            font-family: "Century Gothic", sans-serif;
            background-color: rgb(26, 188, 155); /* Cor de fundo verde azulado */
            color: black;
            font-weight: bold; /* Fonte bold preta */
            padding: 20px;
        }
        .container {
            max-width: 600px;
            margin: 20px auto;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            padding: 20px;
        }
        h1 {
            text-align: center;
            margin-bottom: 20px;
        }
        #itemList {
            margin-bottom: 20px;
        }
        .item-container {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        .item-text {
            flex: 1;
        }
        .item-icon {
            margin-right: 10px;
            font-size: 20px;
        }
        button {
            display: block;
            width: 100%;
            margin-bottom: 10px;
            padding: 10px;
            background-color: rgb(45, 62, 80); /* Cor azul escuro */
            border: none;
            border-radius: 5px;
            color: white;
            font-weight: bold;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Lista de Compras</h1>
        <div id="itemList">
            <!-- Lista de itens adicionados -->
        </div>
        <div id="totalPrice">Total: R$ 0.00</div>
        <button id="addItemBtn">ADICIONAR ITEM</button>
        <button id="calculateTotalBtn">CALCULAR TOTAL</button>
        <button id="deleteItemBtn">APAGAR ITEM</button>
        <button id="searchItemBtn">BUSCAR ITEM</button>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function() {
            let items = [];
            let recognition;

            const itemIcons = {
                "alface": "ğŸ¥¬",
                "abacate": "ğŸ¥‘",
                "banana": "ğŸŒ",
                "maÃ§Ã£": "ğŸ",
                "laranja": "ğŸŠ",
                "uva": "ğŸ‡",
                "melancia": "ğŸ‰",
                "abacaxi": "ğŸ",
                "morango": "ğŸ“",
                "limÃ£o": "ğŸ‹",
                "cenoura": "ğŸ¥•",
                "batata": "ğŸ¥”",
                "cebola": "ğŸ§…",
                "tomate": "ğŸ…",
                "kiwi": "ğŸ¥",
                "pÃªssego": "ğŸ‘",
                "pera": "ğŸ",
                "goiaba": "ğŸ¥",
                "maracujÃ¡": "ğŸŒ±",
                "carne": "ğŸ—",
                "frango": "ğŸ—",
                "peixe": "ğŸŸ",
                "pÃ£o": "ğŸ",
                "bolo": "ğŸ‚",
                "rosquinha": "ğŸª",
                "leite": "ğŸ¥›",
                "queijo": "ğŸ§€",
                "iogurte": "ğŸ¥£",
                "presunto": "ğŸ¥“",
                "salame": "ğŸ¥“",
                "mortadela": "ğŸ¥“",
                "arroz": "ğŸŒ±",
                "feijÃ£o": "ğŸ›",
                "macarrÃ£o": "ğŸ",
                "aÃ§Ãºcar": "ğŸ¬",
                "sal": "ğŸŒ¶ï¸",
                "detergente": "ğŸ§¼",
                "desinfetante": "ğŸ§¹",
                "esponja": "ğŸ§½",
                "sabonete": "ğŸ§¼",
                "shampoo": "ğŸ‘",
                "condicionador": "ğŸ‘",
                "escova de dentes": "ğŸª¥",
                "pasta de dentes": "ğŸª¥",
                "refrigerante": "ğŸ¥¤",
                "suco": "ğŸ¥¤",
                "Ã¡gua": "ğŸ’§",
                "cerveja": "ğŸº",
                "vinho": "ğŸ·",
                "sorvete": "ğŸ¨",
                "pizza": "ğŸ•",
                "vegetais congelados": "â„ï¸",
                "cafÃ©": "â˜•",
                "chÃ¡": "â˜•",
                "chocolate": "ğŸ«",
                "bala": "ğŸ­",
                "pirulito": "ğŸ­",
                "cereal": "ğŸ¥£",
                "granola": "ğŸ¥£",
                "quinoa": "ğŸŒ±",
                "fralda": "ğŸ‘¶",
                "shampoo infantil": "ğŸ‘",
                "lenÃ§o umedecido": "ğŸ‘¶",
                "papinha": "ğŸ‘¶",
                "raÃ§Ã£o para cÃ£es": "ğŸ¶",
                "raÃ§Ã£o para gatos": "ğŸ±",
                "petiscos para animais": "ğŸ¦´",
                "coleira": "ğŸ¾",
                "brinquedo para animais": "ğŸ¦´"
            };

            function startVoiceRecognition(callback) {
    // Verifica se o navegador suporta a API de Reconhecimento de Fala
    if ('webkitSpeechRecognition' in window) {
        // Cria uma nova instÃ¢ncia de Reconhecimento de Fala
        const recognition = new webkitSpeechRecognition();
        
        // Define o idioma para o reconhecimento de fala (portuguÃªs do Brasil)
        recognition.lang = "pt-BR";
        
        // ConfiguraÃ§Ã£o para permitir o reconhecimento contÃ­nuo
        recognition.continuous = true;

        // Evento acionado quando o reconhecimento de fala Ã© concluÃ­do
        recognition.onresult = function(event) {
            // ObtÃ©m o texto reconhecido mais recente
            const transcript = event.results[event.results.length - 1][0].transcript.trim();
            
            // Verifica se o texto reconhecido nÃ£o estÃ¡ vazio
            if (transcript !== "") {
                // Chama a funÃ§Ã£o de retorno (callback) passando o texto reconhecido
                callback(transcript);
            }
        };

        // Inicia o reconhecimento de fala
        recognition.start();
    } else {
        // Caso o navegador nÃ£o suporte a API de Reconhecimento de Fala
        alert("Seu navegador nÃ£o suporta a API de Reconhecimento de Fala.");
    }
}


            // FunÃ§Ã£o para parar o reconhecimento de voz
            function stopVoiceRecognition() {
                if (recognition) {
                    recognition.stop();
                }
            }

            // FunÃ§Ã£o para adicionar um item Ã  lista por voz
            $("#addItemBtn").click(function() {
                startVoiceRecognition(addItemName);
            });

            // FunÃ§Ã£o para adicionar o nome do item Ã  lista
            function addItemName(transcript) {
                const itemName = transcript;
                startVoiceRecognition(addItemPrice.bind(null, itemName));
            }

            // FunÃ§Ã£o para adicionar o preÃ§o do item Ã  lista
            function addItemPrice(itemName, transcript) {
                const parts = transcript.split("e");
                const beforePoint = parts[0].trim();
                const afterPoint = parts[1].trim();
                const price = parseFloat(beforePoint) + parseFloat(`0.${afterPoint}`); 

                if (!isNaN(price)) {
                    addItemToList(itemName, price);
                } else {
                    alert("Formato de preÃ§o invÃ¡lido.");
                }
            }

            // FunÃ§Ã£o para adicionar o item Ã  lista com o preÃ§o
            function addItemToList(itemName, price) {
                const iconClass = itemIcons[itemName.toLowerCase()];
                const itemIcon = $("<span>").addClass("item-icon").text(iconClass);
                const itemText = $("<div>").addClass("item-text").text(`${itemName} - R$ ${price.toFixed(2)}`);
                const itemContainer = $("<div>").addClass("item-container").append(itemIcon, itemText);

                $("#itemList").append(itemContainer);
                items.push({ name: itemName, price: price });
            }

            // FunÃ§Ã£o para calcular o preÃ§o total dos itens
            $("#calculateTotalBtn").click(function() {
                let totalPrice = 0;
                items.forEach(item => {
                    totalPrice += item.price;
                });

                $("#totalPrice").text(`Total: R$ ${totalPrice.toFixed(2)}`);
            });

            // FunÃ§Ã£o para apagar um item da lista por voz
            $("#deleteItemBtn").click(function() {
                startVoiceRecognition(deleteItem);
            });

            // FunÃ§Ã£o para apagar um item da lista
            function deleteItem(itemName) {
                const index = items.findIndex(item => item.name.toLowerCase() === itemName.toLowerCase());
                if (index !== -1) {
                    items.splice(index, 1);
                    updateItemList();
                    alert(`Item "${itemName}" apagado com sucesso.`);
                    stopVoiceRecognition();
                } else {
                    alert(`Item "${itemName}" nÃ£o encontrado na lista.`);
                }
            }

            // FunÃ§Ã£o para atualizar a lista de itens na interface
            function updateItemList() {
                $("#itemList").empty();
                items.forEach(item => {
                    const iconClass = itemIcons[item.name.toLowerCase()];
                    const itemIcon = $("<span>").addClass("item-icon").text(iconClass);
                    const itemText = $("<div>").addClass("item-text").text(`${item.name} - R$ ${item.price.toFixed(2)}`);
                    const itemContainer = $("<div>").addClass("item-container").append(itemIcon, itemText);
                    $("#itemList").append(itemContainer);
                });
            }

            // FunÃ§Ã£o para buscar um item na lista por voz
            $("#searchItemBtn").click(function() {
                startVoiceRecognition(searchItem);
            });

            // FunÃ§Ã£o para buscar um item na lista
            function searchItem(itemName) {
                const foundItem = items.find(item => item.name.toLowerCase() === itemName.toLowerCase());
                if (foundItem) {
                    const itemDiv = $("#itemList").find(`div:contains(${foundItem.name})`);
                    itemDiv.css("background-color", "lightgreen");
                } else {
                    alert("Item nÃ£o encontrado na lista.");
                }
            }
        });
    </script>
</body>
</html>
